<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Food, Handled — v2.3</title>

  <style>
    :root{
      --bg0:#07110d;
      --bg1:#0b1914;
      --card:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.10);
      --ink:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.66);
      --muted2:rgba(255,255,255,.52);
      --pill:rgba(56, 255, 186, .10);
      --mint1:#34f5b0;
      --mint2:#21d6a4;
      --shadow:0 22px 60px rgba(0,0,0,.55);
      --radius:28px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(52,245,176,.18), transparent 55%),
        radial-gradient(800px 600px at 80% 30%, rgba(52,245,176,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100%;
    }

    .wrap{
      max-width:520px;
      margin:0 auto;
      padding:28px 16px 40px;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:18px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:700;
      letter-spacing:.2px;
    }

    .dot{
      width:12px; height:12px; border-radius:99px;
      background:rgba(52,245,176,.80);
      box-shadow:0 0 0 6px rgba(52,245,176,.12);
    }

    .ghostLink{
      color:var(--muted);
      text-decoration:none;
      font-weight:600;
      padding:10px 12px;
      border:1px solid var(--stroke);
      border-radius:999px;
      background:rgba(255,255,255,.03);
    }
    .ghostLink:active{ transform:translateY(1px); }

    .card{
      border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.05));
      border:1px solid var(--stroke);
      box-shadow:var(--shadow);
      padding:20px;
      position:relative;
      overflow:hidden;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:var(--pill);
      border:1px solid rgba(52,245,176,.18);
      color:rgba(255,255,255,.82);
      font-weight:650;
      font-size:13px;
      margin-bottom:10px;
    }

    h1{
      font-size:44px;
      line-height:1.05;
      margin:0 0 10px;
      letter-spacing:-.6px;
    }

    h2{
      font-size:34px;
      line-height:1.08;
      margin:0 0 10px;
      letter-spacing:-.4px;
    }

    .sub{
      color:var(--muted);
      font-size:16px;
      line-height:1.45;
      margin:0 0 16px;
    }

    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btn{
      border:0;
      cursor:pointer;
      border-radius:999px;
      padding:14px 18px;
      font-weight:800;
      font-size:16px;
      color:#052016;
      background:linear-gradient(180deg, var(--mint1), var(--mint2));
      box-shadow:0 14px 40px rgba(52,245,176,.18);
      min-width:180px;
    }
    .btn:active{ transform:translateY(1px); }

    .btn2{
      border:1px solid var(--stroke);
      cursor:pointer;
      border-radius:999px;
      padding:14px 18px;
      font-weight:800;
      font-size:16px;
      color:var(--ink);
      background:rgba(255,255,255,.04);
      min-width:180px;
    }
    .btn2:active{ transform:translateY(1px); }

    .btnSmall{
      border:1px solid var(--stroke);
      cursor:pointer;
      border-radius:999px;
      padding:10px 14px;
      font-weight:800;
      font-size:14px;
      color:var(--ink);
      background:rgba(255,255,255,.04);
    }

    .fine{
      color:var(--muted2);
      font-size:14px;
      margin-top:12px;
    }

    .stack{ margin-top:14px; display:flex; flex-direction:column; gap:12px; }

    .item{
      padding:16px 16px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.12);
    }
    .itemTitle{
      font-weight:900;
      font-size:18px;
      margin:0 0 6px;
      letter-spacing:-.2px;
    }
    .itemMeta{
      color:var(--muted);
      font-weight:650;
      margin:0;
    }

    .divider{
      height:1px;
      background:rgba(255,255,255,.08);
      margin:14px 0;
    }

    .twoCol{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    @media (max-width:520px){
      h1{ font-size:40px; }
      .twoCol{ grid-template-columns:1fr; }
      .btn,.btn2{ width:100%; min-width:unset; }
    }

    ul{
      margin:10px 0 0;
      padding-left:18px;
      color:var(--muted);
      line-height:1.55;
      font-weight:650;
    }

    .tags{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .tag{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      color:rgba(255,255,255,.78);
      font-weight:800;
      font-size:13px;
    }

    .footer{
      margin-top:18px;
      text-align:center;
      color:rgba(255,255,255,.40);
      font-weight:650;
      font-size:13px;
    }

    /* simple page system */
    .page{ display:none; }
    .page.active{ display:block; }

    /* accordion */
    .accordionBtn{
      width:100%;
      text-align:left;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
      color:var(--ink);
      border-radius:22px;
      padding:16px 16px;
      font-weight:900;
      font-size:16px;
      cursor:pointer;
    }
    .accordionContent{
      display:none;
      border:1px solid rgba(255,255,255,.08);
      border-top:0;
      background:rgba(0,0,0,.10);
      border-radius:0 0 22px 22px;
      padding:14px 16px 16px;
      margin-top:-10px;
    }
    .accordionContent.show{ display:block; }

    .danger{
      color:rgba(255,255,255,.72);
      font-weight:800;
      font-size:14px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="dot"></span><span>Food, Handled</span></div>
      <a class="ghostLink" href="#s0" id="startOver">Start over</a>
    </div>

    <!-- S0 -->
    <section class="page" id="s0">
      <div class="card">
        <h1>You don’t have to think about food.</h1>
        <p class="sub">Tap once. Dinner shows up.</p>

        <div class="row" style="margin-top:10px;">
          <button class="btn" id="handleBtn">Handle my food</button>
          <button class="btn2" id="showTonightBtn">Show me tonight</button>
        </div>

        <p class="fine">No account. No setup. Nothing to remember.</p>

        <div class="divider"></div>

        <div class="row">
          <button class="btnSmall" id="rechooseFromHome">Rechoose my meals</button>
          <span class="danger" id="setStatus"></span>
        </div>
      </div>

      <div class="footer">v2.3 — calm by design</div>
    </section>

    <!-- S1 Tonight -->
    <section class="page" id="s1">
      <div class="card">
        <div class="pill">Tonight is handled</div>
        <h2>Tonight</h2>

        <div class="item" id="tonightCard">
          <!-- filled by JS -->
        </div>

        <div class="twoCol">
          <div class="item">
            <p class="itemTitle" style="margin-bottom:10px;">Do this</p>
            <ul id="doThis"></ul>
          </div>
          <div class="item">
            <p class="itemTitle" style="margin-bottom:10px;">Not this</p>
            <ul>
              <li>No planning</li>
              <li>No recipe hunting</li>
              <li>No prep marathon</li>
              <li>No spiral</li>
            </ul>
          </div>
        </div>

        <div class="row" style="margin-top:14px;">
          <button class="btn2" id="seeSetBtn">See the meal set</button>
          <button class="btn" id="imGoodBtn">I’m good</button>
        </div>

        <div class="row" style="margin-top:10px;">
          <button class="btnSmall" id="differentTonightBtn">Pick a different tonight</button>
        </div>

        <p class="fine">You can stop here.</p>
      </div>
    </section>

    <!-- S2 Meal set -->
    <section class="page" id="s2">
      <div class="card">
        <div class="pill">Small set</div>
        <h2>The meal set</h2>
        <p class="sub">Familiar food. Minimal cleanup. Same effort.</p>

        <div class="stack" id="setList"></div>

        <p class="sub" style="margin-top:14px;">Ingredients repeat so shopping stays short.</p>

        <div class="row" style="margin-top:6px;">
          <button class="btn2" id="shopBtn">If I need to shop</button>
          <button class="btn" id="backTonightBtn">Back to tonight</button>
        </div>

        <div class="row" style="margin-top:10px;">
          <button class="btnSmall" id="rechooseBtn">Rechoose my meals</button>
        </div>

        <p class="fine">You can stop here.</p>
      </div>
    </section>

    <!-- S3 Grocery list -->
    <section class="page" id="s3">
      <div class="card">
        <div class="pill">Optional</div>
        <h2>What to buy</h2>
        <p class="sub">Stays closed unless you open it.</p>

        <button class="accordionBtn" id="groceryToggle">Open grocery list (short)</button>
        <div class="accordionContent" id="groceryContent">
          <div id="groceryLists"></div>
          <div class="tags" id="groceryTags"></div>
        </div>

        <div class="divider"></div>

        <h2 style="font-size:28px;margin-bottom:6px;">That’s it.</h2>
        <p class="sub" style="margin-top:0;">Close the tab whenever.</p>

        <div class="row">
          <button class="btn" id="handleAgainBtn">Handle my food</button>
          <button class="btn2" id="copyLinkBtn">Copy link</button>
        </div>

        <p class="fine"><a href="#s2" style="color:rgba(255,255,255,.60);text-decoration:none;font-weight:800;">Back</a></p>
      </div>

      <div class="footer">Disposable UX prototype · hardcoded · GitHub Pages-ready</div>
    </section>
  </div>

<script>
/* =========================
   v2.3 — Core behavior
   - 20 dinner options
   - Choose "small set" = 3 (random, persisted)
   - Tonight rotates by date (stable) + "Pick different tonight" override
   - Rechoose button regenerates set and clears overrides
   - Grocery list generated from chosen set
========================= */

const STORAGE_KEY = "fh_v23_state";

const MEALS = [
  {
    id:"chicken_rice_bowl",
    title:"Chicken & rice bowl",
    meta:"≤15 min • pan + bowl",
    do:["Heat chicken","Add rice","Add veg","Sauce it","Eat"],
    ingredients:{
      core:["Rotisserie chicken (or frozen strips)","Microwave rice packets","Frozen mixed veg"],
      add:["Salsa or hot sauce","Teriyaki or soy sauce","Lime (optional)"]
    }
  },
  {
    id:"turkey_taco_bowl",
    title:"Turkey taco bowl",
    meta:"≤15 min • pan + bowl",
    do:["Brown turkey","Warm rice","Add beans","Top with salsa","Eat"],
    ingredients:{
      core:["Ground turkey (or pre-cooked chicken)","Microwave rice packets","Canned black beans"],
      add:["Salsa","Shredded cheese (optional)","Greek yogurt (optional)"]
    }
  },
  {
    id:"salmon_steam_bag",
    title:"Salmon + steam-bag veg",
    meta:"≤15 min • tray + plate",
    do:["Bake salmon","Microwave veg","Add rice","Season","Eat"],
    ingredients:{
      core:["Salmon fillets (fresh or frozen)","Steam-in-bag veggies","Microwave rice packets"],
      add:["Lemon pepper","Garlic powder","Butter (optional)"]
    }
  },
  {
    id:"chicken_pesto_pasta",
    title:"Chicken pesto pasta",
    meta:"≤15 min • pot + bowl",
    do:["Boil pasta","Heat chicken","Stir pesto","Add spinach","Eat"],
    ingredients:{
      core:["Pasta","Pesto (jar)","Rotisserie chicken"],
      add:["Baby spinach","Parmesan (optional)"]
    }
  },
  {
    id:"shrimp_fried_rice",
    title:"Shrimp fried rice (lazy)",
    meta:"≤12 min • pan + bowl",
    do:["Heat shrimp","Add frozen veg","Add rice","Soy + mix","Eat"],
    ingredients:{
      core:["Frozen shrimp","Microwave rice packets","Frozen mixed veg"],
      add:["Soy sauce","Sesame oil (optional)","Sriracha (optional)"]
    }
  },
  {
    id:"chicken_caesar_wrap",
    title:"Chicken Caesar wraps",
    meta:"≤10 min • board + plate",
    do:["Chop chicken","Toss with Caesar","Wrap it","Eat"],
    ingredients:{
      core:["Rotisserie chicken","Tortillas","Romaine (bag)"],
      add:["Caesar dressing","Parmesan (optional)","Croutons (optional)"]
    }
  },
  {
    id:"sausage_peppers",
    title:"Chicken sausage + peppers",
    meta:"≤15 min • pan + plate",
    do:["Slice sausage","Sauté peppers/onion","Add sauce","Eat"],
    ingredients:{
      core:["Chicken sausage","Frozen pepper/onion blend","Marinara (jar)"],
      add:["Shredded mozzarella (optional)","Rice or bread (optional)"]
    }
  },
  {
    id:"beef_chili_bowl",
    title:"Chili bowl (no-cook)",
    meta:"≤6 min • bowl + spoon",
    do:["Heat chili","Add toppings","Eat"],
    ingredients:{
      core:["Canned chili (or chili beans)"],
      add:["Shredded cheese (optional)","Greek yogurt (optional)","Hot sauce (optional)"]
    }
  },
  {
    id:"tuna_rice_bowl",
    title:"Tuna rice bowl",
    meta:"≤8 min • bowl + fork",
    do:["Warm rice","Mix tuna","Add cucumber/veg","Sauce","Eat"],
    ingredients:{
      core:["Tuna packets/cans","Microwave rice packets","Cucumber (or frozen edamame)"],
      add:["Soy sauce","Mayo (optional)","Sriracha (optional)"]
    }
  },
  {
    id:"chicken_quesadilla",
    title:"Chicken quesadillas",
    meta:"≤12 min • pan + plate",
    do:["Add tortilla","Cheese + chicken","Flip","Eat"],
    ingredients:{
      core:["Tortillas","Shredded cheese","Rotisserie chicken"],
      add:["Salsa","Greek yogurt (optional)"]
    }
  },
  {
    id:"stir_fry_kit",
    title:"Stir-fry kit + chicken",
    meta:"≤12 min • pan + bowl",
    do:["Heat chicken","Cook kit","Add sauce","Eat"],
    ingredients:{
      core:["Bagged stir-fry kit","Rotisserie chicken (or tofu)"],
      add:["Rice (optional)","Extra sauce (optional)"]
    }
  },
  {
    id:"gyro_bowl",
    title:"Gyro bowl (cheat code)",
    meta:"≤10 min • bowl + spoon",
    do:["Warm meat","Add rice","Top with tzatziki","Eat"],
    ingredients:{
      core:["Pre-cooked gyro meat (or chicken)","Microwave rice packets","Cucumber + tomato (or salad mix)"],
      add:["Tzatziki","Feta (optional)"]
    }
  },
  {
    id:"bbq_chicken_sliders",
    title:"BBQ chicken sliders",
    meta:"≤10 min • bowl + plate",
    do:["Shred chicken","Add BBQ","Assemble","Eat"],
    ingredients:{
      core:["Rotisserie chicken","BBQ sauce","Slider buns"],
      add:["Coleslaw mix (optional)","Pickles (optional)"]
    }
  },
  {
    id:"rice_bean_bowl",
    title:"Rice + beans + toppings",
    meta:"≤8 min • bowl + spoon",
    do:["Warm rice","Add beans","Top","Eat"],
    ingredients:{
      core:["Microwave rice packets","Canned black beans","Salsa"],
      add:["Avocado (optional)","Cheese (optional)","Hot sauce (optional)"]
    }
  },
  {
    id:"meatball_sub",
    title:"Meatball subs (lazy)",
    meta:"≤12 min • tray + plate",
    do:["Heat meatballs","Add marinara","Toast roll","Eat"],
    ingredients:{
      core:["Frozen meatballs","Marinara (jar)","Sub rolls"],
      add:["Mozzarella (optional)"]
    }
  },
  {
    id:"chicken_soup_plus",
    title:"Soup + protein upgrade",
    meta:"≤10 min • pot + bowl",
    do:["Heat soup","Add chicken","Add spinach","Eat"],
    ingredients:{
      core:["Soup (carton/can)","Rotisserie chicken"],
      add:["Baby spinach","Crackers (optional)"]
    }
  },
  {
    id:"sheet_pan_nuggets",
    title:"Sheet-pan nuggets + veg",
    meta:"≤15 min • tray + plate",
    do:["Bake nuggets","Bake veg","Sauce","Eat"],
    ingredients:{
      core:["Chicken nuggets/strips","Frozen broccoli (or veg mix)"],
      add:["BBQ sauce","Hot sauce"]
    }
  },
  {
    id:"poke_bowl_fake",
    title:"“Poke” bowl (no-fuss)",
    meta:"≤10 min • bowl + fork",
    do:["Warm rice","Add smoked salmon","Add cucumber","Sauce","Eat"],
    ingredients:{
      core:["Microwave rice packets","Smoked salmon (or canned salmon)","Cucumber"],
      add:["Soy sauce","Sesame seeds (optional)"]
    }
  },
  {
    id:"chicken_salsa_salad",
    title:"Salsa chicken salad",
    meta:"≤8 min • bowl + fork",
    do:["Dump salad mix","Add chicken","Add salsa","Eat"],
    ingredients:{
      core:["Bagged salad kit","Rotisserie chicken"],
      add:["Salsa","Tortilla chips (optional)"]
    }
  },
  {
    id:"ramen_upgrade",
    title:"Ramen upgrade",
    meta:"≤12 min • pot + bowl",
    do:["Boil noodles","Add frozen veg","Add chicken","Eat"],
    ingredients:{
      core:["Ramen or instant noodles","Frozen mixed veg","Rotisserie chicken"],
      add:["Soft tofu (optional)","Chili oil (optional)"]
    }
  }
];

function loadState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return null;
    return JSON.parse(raw);
  }catch(e){ return null; }
}

function saveState(state){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}

function todayKey(){
  const d = new Date();
  const y = d.getFullYear();
  const m = String(d.getMonth()+1).padStart(2,"0");
  const day = String(d.getDate()).padStart(2,"0");
  return `${y}-${m}-${day}`;
}

function randInt(max){
  return Math.floor(Math.random()*max);
}

function pickUnique(array, n){
  const copy = [...array];
  const out = [];
  while(out.length < n && copy.length){
    const idx = randInt(copy.length);
    out.push(copy.splice(idx,1)[0]);
  }
  return out;
}

function ensureSet(){
  let state = loadState();
  if(!state){
    state = { setIds:[], tonightOverrideByDay:{} };
  }
  if(!state.setIds || state.setIds.length !== 3){
    const picks = pickUnique(MEALS.map(m=>m.id), 3);
    state.setIds = picks;
    state.tonightOverrideByDay = {};
    saveState(state);
  }
  return state;
}

function rechooseMeals(){
  const state = { setIds: pickUnique(MEALS.map(m=>m.id), 3), tonightOverrideByDay:{} };
  saveState(state);
  renderAll();
}

function getMealById(id){
  return MEALS.find(m=>m.id===id);
}

function getSetMeals(){
  const state = ensureSet();
  return state.setIds.map(getMealById).filter(Boolean);
}

function getTonightMeal(){
  const state = ensureSet();
  const setMeals = getSetMeals();
  const key = todayKey();

  // If user picked a different tonight for today, honor it
  const overrideId = state.tonightOverrideByDay?.[key];
  if(overrideId){
    const m = getMealById(overrideId);
    if(m) return m;
  }

  // Deterministic rotation by date (stable, feels safe)
  const hash = key.split("-").join("");
  let sum = 0;
  for(const ch of hash) sum += ch.charCodeAt(0);
  const idx = sum % setMeals.length;
  return setMeals[idx];
}

function pickDifferentTonight(){
  const state = ensureSet();
  const setMeals = getSetMeals();
  const current = getTonightMeal();
  const options = setMeals.filter(m=>m.id!==current.id);
  const chosen = options[randInt(options.length)];
  const key = todayKey();
  state.tonightOverrideByDay = state.tonightOverrideByDay || {};
  state.tonightOverrideByDay[key] = chosen.id;
  saveState(state);
  renderAll();
  go("#s1");
}

function buildGroceryFromSet(){
  const setMeals = getSetMeals();

  const core = new Set();
  const add = new Set();

  setMeals.forEach(m=>{
    (m.ingredients.core||[]).forEach(x=>core.add(x));
    (m.ingredients.add||[]).forEach(x=>add.add(x));
  });

  return {
    core:[...core],
    add:[...add],
    tags:[
      `~${Math.min(10, Math.max(8, core.size))}+ items`,
      "1 store",
      "minimal waste"
    ]
  };
}

/* =========================
   Rendering
========================= */

function renderHome(){
  const state = ensureSet();
  const status = document.getElementById("setStatus");
  const setMeals = getSetMeals();
  status.textContent = setMeals.length ? `Current set: ${setMeals.map(m=>m.title).join(" • ")}` : "";
}

function renderTonight(){
  const meal = getTonightMeal();
  const tonightCard = document.getElementById("tonightCard");
  tonightCard.innerHTML = `
    <p class="itemTitle">${meal.title}</p>
    <p class="itemMeta">${meal.meta}</p>
  `;

  const doThis = document.getElementById("doThis");
  doThis.innerHTML = "";
  meal.do.forEach(step=>{
    const li = document.createElement("li");
    li.textContent = step;
    doThis.appendChild(li);
  });
}

function renderSet(){
  const setMeals = getSetMeals();
  const list = document.getElementById("setList");
  list.innerHTML = "";
  setMeals.forEach(m=>{
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <p class="itemTitle">${m.title}</p>
      <p class="itemMeta">${m.meta}</p>
    `;
    list.appendChild(div);
  });
}

function renderGrocery(){
  const data = buildGroceryFromSet();
  const wrap = document.getElementById("groceryLists");
  const tags = document.getElementById("groceryTags");

  wrap.innerHTML = `
    <p class="itemTitle" style="margin:0 0 6px;">Core (shows up more than once)</p>
    <ul>${data.core.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
    <p class="itemTitle" style="margin:14px 0 6px;">Quick add-ons (optional)</p>
    <ul>${data.add.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
  `;

  tags.innerHTML = "";
  data.tags.forEach(t=>{
    const span = document.createElement("span");
    span.className = "tag";
    span.textContent = t;
    tags.appendChild(span);
  });
}

function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function renderAll(){
  renderHome();
  renderTonight();
  renderSet();
  renderGrocery();
}

/* =========================
   Navigation
========================= */

function go(hash){
  location.hash = hash;
  showPageFromHash();
}

function showPageFromHash(){
  const hash = location.hash || "#s0";
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  const page = document.querySelector(hash);
  (page || document.getElementById("s0")).classList.add("active");
}

/* =========================
   Events
========================= */

document.getElementById("handleBtn").addEventListener("click", ()=>{
  ensureSet();
  renderAll();
  go("#s1");
});

document.getElementById("showTonightBtn").addEventListener("click", ()=>{
  ensureSet();
  renderAll();
  go("#s1");
});

document.getElementById("seeSetBtn").addEventListener("click", ()=>go("#s2"));
document.getElementById("backTonightBtn").addEventListener("click", ()=>go("#s1"));
document.getElementById("shopBtn").addEventListener("click", ()=>go("#s3"));
document.getElementById("handleAgainBtn").addEventListener("click", ()=>go("#s1"));

document.getElementById("imGoodBtn").addEventListener("click", ()=>{
  // “I’m good” just returns to home — minimal closure
  go("#s0");
});

document.getElementById("differentTonightBtn").addEventListener("click", ()=>{
  pickDifferentTonight();
});

document.getElementById("rechooseBtn").addEventListener("click", ()=>{
  rechooseMeals();
  go("#s2");
});

document.getElementById("rechooseFromHome").addEventListener("click", ()=>{
  rechooseMeals();
  go("#s0");
});

document.getElementById("copyLinkBtn").addEventListener("click", async ()=>{
  try{
    await navigator.clipboard.writeText(location.href.split("#")[0] + "#s0");
    const btn = document.getElementById("copyLinkBtn");
    const old = btn.textContent;
    btn.textContent = "Copied";
    setTimeout(()=>btn.textContent = old, 900);
  }catch(e){
    alert("Couldn’t copy. (iOS sometimes blocks clipboard.)");
  }
});

document.getElementById("groceryToggle").addEventListener("click", ()=>{
  const c = document.getElementById("groceryContent");
  c.classList.toggle("show");
});

window.addEventListener("hashchange", showPageFromHash);

/* boot */
ensureSet();
renderAll();
showPageFromHash();
</script>
</body>
</html>
